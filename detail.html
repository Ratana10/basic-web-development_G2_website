<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Detail ‚Äî Online Shopping</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    * {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    /* Loading spinner animation */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .spinner {
      animation: spin 1s linear infinite;
    }
  </style>
</head>

<body class="bg-[#111] text-white min-h-screen pb-20">

  <!-- üåê Desktop Navbar -->
  <header class="fixed top-0 left-0 right-0 z-50 shadow-lg w-full py-3 border-b border-gray-800 hidden md:flex justify-between items-center px-8 bg-[#111] text-white">
    <img class="w-16 h-16" src="./logo.png" alt="Logo">
    <nav class="flex flex-row gap-8 uppercase text-sm tracking-wide">
      <a href="#" class="relative after:absolute after:left-0 after:bottom-0 after:h-[3px] after:w-0 after:bg-blue-500 hover:after:w-full after:transition-all after:duration-300">
        Home
      </a>
      <a href="./index.html" class="relative after:absolute after:left-0 after:bottom-0 after:h-[3px] after:w-full after:bg-blue-500 text-blue-400">
        Product
      </a>
      <a href="#" class="relative after:absolute after:left-0 after:bottom-0 after:h-[3px] after:w-0 after:bg-blue-500 hover:after:w-full after:transition-all after:duration-300">
        Cart
      </a>
      <a href="./services.html" class="relative after:absolute after:left-0 after:bottom-0 after:h-[3px] after:w-0 after:bg-blue-500 hover:after:w-full after:transition-all after:duration-300">
        Services
      </a>
      <a href="./contact.html" class="relative after:absolute after:left-0 after:bottom-0 after:h-[3px] after:w-0 after:bg-blue-500 hover:after:w-full after:transition-all after:duration-300">
        Contact
      </a>
    </nav>
  </header>

  <!-- üì± Mobile Bottom Navbar -->
  <header class="md:hidden fixed bottom-0 left-0 right-0 bg-[#111] text-white border-t border-gray-800 shadow-lg px-4 py-2 flex justify-around items-center z-50">
    <nav class="flex justify-between w-full max-w-md mx-auto text-xs font-medium">
      <a href="#" class="flex flex-col items-center hover:text-blue-500 transition">
        <i data-lucide="home" class="w-5 h-5 mb-1"></i>
        <span>Home</span>
      </a>
      <a href="#" class="flex flex-col items-center hover:text-blue-500 transition">
        <i data-lucide="shopping-cart" class="w-5 h-5 mb-1"></i>
        <span>Cart</span>
      </a>
      <a href="./index.html" class="flex flex-col items-center text-blue-400">
        <i data-lucide="shirt" class="w-5 h-5 mb-1"></i>
        <span>Product</span>
      </a>
      <a href="./services.html" class="flex flex-col items-center hover:text-blue-500 transition">
        <i data-lucide="briefcase" class="w-5 h-5 mb-1"></i>
        <span>Services</span>
      </a>
      <a href="./contact.html" class="flex flex-col items-center hover:text-blue-500 transition">
        <i data-lucide="phone" class="w-5 h-5 mb-1"></i>
        <span>Contact</span>
      </a>
    </nav>
  </header>

  <!-- Back Button -->
  <div class="max-w-4xl mx-auto px-6 mt-8 md:mt-26 mb-6">
    <a
      href="./index.html"
      class="flex items-center gap-2 text-gray-300 hover:text-blue-400 transition text-sm md:text-base">
      <i data-lucide="arrow-left" class="w-5 h-5"></i>
      <span>Back</span>
    </a>
  </div>

  <!-- Loading State -->
  <div id="loading" class="flex flex-col items-center justify-center min-h-[60vh]">
    <div class="w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full spinner"></div>
    <p class="mt-4 text-gray-400 text-sm">Loading product details...</p>
  </div>

  <!-- Product Detail Section (Hidden initially) -->
  <section id="productDetail" class="hidden max-w-4xl mx-auto px-6 grid grid-cols-1 md:grid-cols-12 gap-10 items-start">
    
    <!-- üñº Thumbnails (we'll keep it simple with just the main image repeated) -->
    <div id="thumbnails" class="md:col-span-2 flex md:flex-col order-2 md:order-1 flex-row md:space-y-3 space-x-3 md:space-x-0 overflow-x-auto md:overflow-visible md:sticky md:top-28">
      <!-- Thumbnails will be added dynamically -->
    </div>

    <!-- üì∏ Main Product Image -->
    <div class="md:col-span-5 flex justify-center items-center order-1 md:order-2 md:sticky md:top-28">
      <img id="mainImage" src=""
        class="w-[350px] md:w-[420px] h-[350px] md:h-[420px] object-contain rounded-md hover:scale-105 transition-transform duration-300"
        alt="Product Image">
    </div>

    <!-- üßæ Product Info -->
    <div class="md:col-span-5 space-y-6 order-3">
      <h2 id="productTitle" class="text-2xl md:text-3xl font-bold"></h2>

      <div class="flex items-center gap-2 text-yellow-400">
        <span id="rating"></span>
        <span id="reviewCount" class="text-gray-400 text-sm"></span>
      </div>

      <p id="productPrice" class="text-2xl text-blue-400"></p>

      <p id="productDescription" class="text-gray-400 leading-relaxed"></p>

      <div>
        <label class="block text-gray-400 mb-1">Quantity:</label>
        <input type="number" value="1" min="1"
          class="bg-transparent border border-gray-600 rounded-md w-20 text-center py-1 focus:border-blue-400 outline-none">
      </div>

      <div class="flex flex-col md:flex-row gap-3">
        <button
          class="flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2.5 rounded-md flex items-center justify-center gap-2 transition">
          <i data-lucide="shopping-cart" class="w-4 h-4"></i> Add to Cart
        </button>
        <button
          class="flex-1 bg-white hover:bg-gray-200 text-black py-3 rounded-md flex items-center justify-center gap-2 transition">
          <i data-lucide="circle-dollar-sign" class="w-5 h-5"></i> Buy Now
        </button>
      </div>
    </div>
  </section>

  <!-- Related Products Section -->
  <section id="relatedProducts" class="hidden max-w-4xl mx-auto px-6 mt-16 md:mt-24">
    <h2 class="text-2xl md:text-3xl mb-6 border-l-4 border-blue-500 pl-3">
      Related Products
    </h2>
    <div id="relatedGrid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 md:gap-10">
      <!-- Related products will be added dynamically -->
    </div>
  </section>

  <!-- üß© Footer -->
  <footer class="mt-20 py-4 text-center text-gray-500 border-t border-gray-800 text-sm mb-2 md:mb-4">
    ¬© 2025 Online Shopping
  </footer>

  <!-- üîß Script -->
  <script>
    // Get product ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    
    // Elements
    const loadingEl = document.getElementById('loading');
    const productDetailEl = document.getElementById('productDetail');
    const relatedProductsEl = document.getElementById('relatedProducts');
    
    // Fetch product by ID
    async function fetchProductDetail() {
      // If no ID in URL, redirect to product listing
      if (!productId) {
        window.location.href = './index.html';
        return;
      }
      
      try {
        // Fetch the specific product
        const response = await fetch(`https://fakestoreapi.com/products/${productId}`);
        const product = await response.json();
        
        // Hide loading, show content
        loadingEl.classList.add('hidden');
        productDetailEl.classList.remove('hidden');
        relatedProductsEl.classList.remove('hidden');
        
        // Update product details
        document.getElementById('productTitle').textContent = product.title;
        document.getElementById('productPrice').textContent = `$${product.price}`;
        document.getElementById('productDescription').textContent = product.description;
        
        // Set main image
        document.getElementById('mainImage').src = product.image;
        
        // Add rating (fake store API has rating object)
        const stars = '‚òÖ'.repeat(Math.round(product.rating.rate)) + '‚òÜ'.repeat(5 - Math.round(product.rating.rate));
        document.getElementById('rating').textContent = stars;
        document.getElementById('reviewCount').textContent = `(${product.rating.count} reviews)`;
        
        // Create thumbnails (using same image 3 times for demo)
        const thumbnailsContainer = document.getElementById('thumbnails');
        for (let i = 0; i < 3; i++) {
          const thumb = document.createElement('img');
          thumb.src = product.image;
          thumb.className = 'w-20 h-20 object-contain border border-gray-700 rounded-md cursor-pointer hover:border-blue-500 transition';
          thumb.alt = `thumb${i + 1}`;
          thumb.addEventListener('click', () => {
            document.getElementById('mainImage').src = product.image;
          });
          thumbnailsContainer.appendChild(thumb);
        }
        
        // Fetch related products (same category)
        fetchRelatedProducts(product.category);
        
      } catch (error) {
        console.error('Error fetching product:', error);
        loadingEl.innerHTML = `
          <p class="text-red-400">‚ö†Ô∏è Failed to load product details</p>
          <a href="./index.html" class="mt-4 text-blue-400 hover:underline">Back to products</a>
        `;
      }
    }
    
    // Fetch related products
    async function fetchRelatedProducts(category) {
      try {
        // Fetch products from same category
        const response = await fetch(`https://fakestoreapi.com/products/category/${category}`);
        const products = await response.json();
        
        // Filter out current product and limit to 4
        const relatedProducts = products
          .filter(p => p.id !== parseInt(productId))
          .slice(0, 4);
        
        // Display related products
        const relatedGrid = document.getElementById('relatedGrid');
        relatedGrid.innerHTML = '';
        
        relatedProducts.forEach(product => {
          const card = document.createElement('div');
          card.className = 'flex flex-col group cursor-pointer';
          card.innerHTML = `
            <a href="./detail.html?id=${product.id}">
              <img src="${product.image}" alt="${product.title}"
                class="w-full h-42 object-contain mb-3 group-hover:opacity-80 transition" />
              <p class="text-gray-200 text-lg">$${product.price}</p>
              <p class="text-gray-400 text-sm group-hover:text-white line-clamp-2">${product.title}</p>
            </a>
          `;
          relatedGrid.appendChild(card);
        });
        
      } catch (error) {
        console.error('Error fetching related products:', error);
      }
    }
    
    // Initialize when page loads
    window.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons();
      fetchProductDetail();
    });
  </script>
</body>
</html>